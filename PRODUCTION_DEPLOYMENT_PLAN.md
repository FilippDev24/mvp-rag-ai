# –ü–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Knowledge Base RAG MVP –Ω–∞ Ubuntu —Å–µ—Ä–≤–µ—Ä–µ

## üéØ –¶–ï–õ–¨
–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é RAG —Å–∏—Å—Ç–µ–º—É –Ω–∞ Ubuntu —Å–µ—Ä–≤–µ—Ä–µ 89.169.150.113 —Å —É—á–µ—Ç–æ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π.

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### –¢–µ–∫—É—â–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (macOS):
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**: PostgreSQL, Redis, ChromaDB, Backend (Node.js), Worker (Python), Frontend (React)
- **–õ–æ–∫–∞–ª—å–Ω—ã–µ ML-—Å–µ—Ä–≤–∏—Å—ã –Ω–∞ —Ö–æ—Å—Ç–µ**: 
  - Embedding —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8003) - `intfloat/multilingual-e5-large-instruct`
  - Reranker —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8002) - `BAAI/bge-reranker-v2-m3`
- **–í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: Ollama (–ø–æ—Ä—Ç 11434)

### –¶–µ–ª–µ–≤–∞—è production –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Ubuntu):
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**: –¢–µ –∂–µ —Å–µ—Ä–≤–∏—Å—ã
- **ML-—Å–µ—Ä–≤–∏—Å—ã**: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Ubuntu x86_64
- **Ollama**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –†–ê–ó–õ–ò–ß–ò–Ø macOS vs Ubuntu

### 1. **PyTorch –∏ Apple Silicon**
- **macOS**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç MPS (Metal Performance Shaders)
- **Ubuntu**: –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CUDA (–µ—Å–ª–∏ –µ—Å—Ç—å GPU) –∏–ª–∏ CPU

### 2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞**
- **macOS**: ARM64 (Apple Silicon)
- **Ubuntu**: x86_64

### 3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ML-–º–æ–¥–µ–ª–µ–π**
- **macOS M4 Pro**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Apple Silicon
- **Ubuntu**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∂–µ–ª–µ–∑–∞ —Å–µ—Ä–≤–µ—Ä–∞

## üìã –ü–õ–ê–ù –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø

### –§–ê–ó–ê 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSH –¥–æ—Å—Ç—É–ø
- [x] –û—Ü–µ–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∏ Docker Compose
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Git, Node.js, Python3
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –§–ê–ó–ê 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama –Ω–∞ Ubuntu
- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥–µ–ª–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### –§–ê–ó–ê 3: –ê–¥–∞–ø—Ç–∞—Ü–∏—è ML-—Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è Ubuntu
- [ ] –°–æ–∑–¥–∞—Ç—å Ubuntu-–≤–µ—Ä—Å–∏–∏ embedding –∏ reranker —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å PyTorch –¥–ª—è CPU/CUDA
- [ ] –°–æ–∑–¥–∞—Ç—å systemd —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –§–ê–ó–ê 4: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å docker-compose.prod.yml
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –§–ê–ó–ê 5: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞—Ç—å Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å ML-—Å–µ—Ä–≤–∏—Å—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### –§–ê–ó–ê 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±—ç–∫–∞–ø—ã

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è ML-–º–æ–¥–µ–ª–µ–π:
- **RAM**: –ú–∏–Ω–∏–º—É–º 8GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16GB+)
- **CPU**: –ú–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
- **–î–∏—Å–∫**: 20GB+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –º–æ–¥–µ–ª–µ–π
- **GPU**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è

### –ü–æ—Ä—Ç—ã –≤ production:
- **80/443**: Nginx (reverse proxy)
- **8010**: PostgreSQL (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8011**: Redis (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8012**: ChromaDB (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8013**: Ollama (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8014**: Backend API (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8015**: Frontend (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8002**: Reranker —Å–µ—Ä–≤–∏—Å (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **8003**: Embedding —Å–µ—Ä–≤–∏—Å (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è Ubuntu:

#### 1. ML-—Å–µ—Ä–≤–∏—Å—ã
```python
# –í–º–µ—Å—Ç–æ MPS –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:
if torch.cuda.is_available():
    device = "cuda"
else:
    device = "cpu"
```

#### 2. Docker Compose
```yaml
# –£–±—Ä–∞—Ç—å platform-specific –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# –î–æ–±–∞–≤–∏—Ç—å production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å restart policies
```

#### 3. Systemd —Å–µ—Ä–≤–∏—Å—ã
```ini
[Unit]
Description=Knowledge Base Embedding Service
After=network.target

[Service]
Type=simple
User=kb-app
WorkingDirectory=/opt/knowledge-base
ExecStart=/opt/knowledge-base/venv/bin/python embedding_server.py
Restart=always

[Install]
WantedBy=multi-user.target
```

## üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã:
1. **–§–∞–π—Ä–≤–æ–ª**: –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –ø–æ—Ä—Ç—ã –∫—Ä–æ–º–µ 22, 80, 443
2. **SSL**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Let's Encrypt
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. **–°–µ–∫—Ä–µ—Ç—ã**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .env —Ñ–∞–π–ª—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/RAM/–î–∏—Å–∫
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ ML-—Å–µ—Ä–≤–∏—Å–æ–≤
- –°—Ç–∞—Ç—É—Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. **–°–µ–≥–æ–¥–Ω—è**: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å ML-—Å–µ—Ä–≤–∏—Å—ã –¥–ª—è Ubuntu
3. **–ó–∞–≤—Ç—Ä–∞**: –°–æ–∑–¥–∞—Ç—å production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
4. **–ù–∞ –Ω–µ–¥–µ–ª–µ**: –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## ‚ö†Ô∏è –†–ò–°–ö–ò –ò –ú–ò–¢–ò–ì–ê–¶–ò–Ø

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏:
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ML**: Ubuntu –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ macOS
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞—Ç—á–∏–Ω–≥–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–∑–ª–∏—á–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
3. **–†–µ—Å—É—Ä—Å—ã**: –ù–µ—Ö–≤–∞—Ç–∫–∞ RAM –¥–ª—è –º–æ–¥–µ–ª–µ–π
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π

## üìù –ß–ï–ö–õ–ò–°–¢ –ì–û–¢–û–í–ù–û–°–¢–ò

- [ ] –°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] ML-—Å–µ—Ä–≤–∏—Å—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Ubuntu
- [ ] Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

**–°—Ç–∞—Ç—É—Å**: üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: AI Agent
**–î–µ–¥–ª–∞–π–Ω**: –í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏
