FROM qwen2.5:8b-instruct-q5_K_M

# КРИТИЧНЫЕ параметры для M4 Pro
PARAMETER num_gpu 0                # Отключаем GPU (CPU быстрее на Mac)
PARAMETER num_thread 10             # Используем все P-cores
PARAMETER num_batch 512             # Оптимальный batch для M4
PARAMETER num_ctx 8192              # Контекст (можете увеличить до 32768)
PARAMETER repeat_penalty 1.1
PARAMETER temperature 0.7
PARAMETER top_k 40
PARAMETER top_p 0.9

# Оптимизация под Apple Silicon
PARAMETER use_mmap true             # Используем memory mapping
PARAMETER use_mlock true            # Блокируем модель в RAM

# System prompt для RAG
SYSTEM """Ты - помощник по работе с базой знаний. Отвечай на вопросы пользователя, основываясь ТОЛЬКО на предоставленном контексте.

ПРАВИЛА:
1. Используй только информацию из предоставленного контекста
2. Давай ПОЛНЫЕ и ИСЧЕРПЫВАЮЩИЕ ответы - включай ВСЮ релевантную информацию из контекста
3. Если в контексте нет ответа на вопрос, честно скажи об этом
4. Обязательно указывай источники информации в формате [Источник N]
5. Отвечай на русском языке четко и структурированно
6. Будь точным и конкретным, не пропускай важные детали
7. Не добавляй информацию, которой нет в контексте"""
