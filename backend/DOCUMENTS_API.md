# Documents API - Knowledge Base RAG MVP

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –≤ —Å–∏—Å—Ç–µ–º–µ Knowledge Base RAG MVP.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
cd backend
npm run dev
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
# –¢–µ—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
npm run test:auth

# –¢–µ—Å—Ç API –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
npm run test:documents
```

### 3. Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è
–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `documents-postman-collection.json` –≤ Postman –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üìã API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
–í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`

### –î–æ–∫—É–º–µ–Ω—Ç—ã

#### `POST /api/documents/upload`
–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (multipart/form-data):**
- `file` (file, required) - –§–∞–π–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `title` (string, required) - –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `accessLevel` (number, optional) - –£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ (1-100, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- PDF (.pdf)
- Word (.docx, .doc)
- –¢–µ–∫—Å—Ç (.txt)
- CSV (.csv)
- JSON (.json)
- Markdown (.md)
- RTF (.rtf)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10MB
- –ú–∞–∫—Å–∏–º—É–º 10 –∑–∞–≥—Ä—É–∑–æ–∫ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X POST http://localhost:3001/api/documents/upload \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "file=@document.pdf" \
  -F "title=My Document" \
  -F "accessLevel=50"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "title": "My Document",
    "filePath": "uploads/file-123456789.pdf",
    "fileType": "application/pdf",
    "accessLevel": 50,
    "uploadedBy": "user-id",
    "processed": false,
    "chunkCount": 0,
    "createdAt": "2024-01-01T00:00:00.000Z",
    "metadata": {
      "originalName": "document.pdf",
      "size": 1024000,
      "uploadedAt": "2024-01-01T00:00:00.000Z"
    },
    "user": {
      "id": "user-id",
      "email": "user@example.com",
      "fullName": "User Name"
    }
  },
  "metadata": {
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

#### `GET /api/documents`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `page` (number, optional) - –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
- `limit` (number, optional) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20, –º–∞–∫—Å–∏–º—É–º: 100)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X GET "http://localhost:3001/api/documents?page=1&limit=20" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "title": "Document 1",
      "fileType": "application/pdf",
      "accessLevel": 50,
      "processed": true,
      "chunkCount": 15,
      "createdAt": "2024-01-01T00:00:00.000Z",
      "user": {
        "id": "user-id",
        "email": "user@example.com",
        "fullName": "User Name"
      }
    }
  ],
  "metadata": {
    "page": 1,
    "limit": 20,
    "total": 1,
    "totalPages": 1,
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

#### `GET /api/documents/:id`
–ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ ID

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X GET http://localhost:3001/api/documents/DOCUMENT_ID \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

#### `DELETE /api/documents/:id`
–£–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç

**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –ª—é–±–æ–π –¥–æ–∫—É–º–µ–Ω—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X DELETE http://localhost:3001/api/documents/DOCUMENT_ID \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

### –ß–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### `GET /api/documents/:id/chunks`
–ü–æ–ª—É—á–∏—Ç—å —á–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `page` (number, optional) - –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
- `limit` (number, optional) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50, –º–∞–∫—Å–∏–º—É–º: 200)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X GET "http://localhost:3001/api/documents/DOCUMENT_ID/chunks?page=1&limit=50" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": "chunk-uuid",
      "documentId": "document-uuid",
      "chunkIndex": 0,
      "content": "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —á–∞–Ω–∫–∞...",
      "accessLevel": 50,
      "charCount": 500,
      "createdAt": "2024-01-01T00:00:00.000Z",
      "metadata": {}
    }
  ],
  "metadata": {
    "page": 1,
    "limit": 50,
    "total": 15,
    "totalPages": 1,
    "timestamp": "2024-01-01T00:00:00.000Z"
  }
}
```

#### `PUT /api/documents/:id/chunks/:chunkId`
–û–±–Ω–æ–≤–∏—Ç—å —á–∞–Ω–∫

**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
- –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ 20+
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—ã–µ —á–∞–Ω–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —á–∞–Ω–∫–∏ —Å–≤–æ–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**Body (JSON):**
```json
{
  "content": "–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —á–∞–Ω–∫–∞",
  "metadata": {
    "updated": true,
    "updatedAt": "2024-01-01T00:00:00.000Z"
  }
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X PUT http://localhost:3001/api/documents/DOCUMENT_ID/chunks/CHUNK_ID \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"content": "Updated content"}'
```

#### `DELETE /api/documents/:id/chunks/:chunkId`
–£–¥–∞–ª–∏—Ç—å —á–∞–Ω–∫

**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
- –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ 20+
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –ª—é–±—ã–µ —á–∞–Ω–∫–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–∞–Ω–∫–∏ —Å–≤–æ–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X DELETE http://localhost:3001/api/documents/DOCUMENT_ID/chunks/CHUNK_ID \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞
- **1-9**: –ë–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø (—á—Ç–µ–Ω–∏–µ)
- **10-19**: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **20-49**: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤
- **50-99**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞
- **100**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
1. **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –≤—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç –≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–∞** - –∫–∞–∂–¥—ã–π endpoint –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é –¥–æ—Å—Ç—É–ø–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º —É—Ä–æ–≤–Ω–µ–º
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–∫—Ä–æ–º–µ –∞–¥–º–∏–Ω–æ–≤)
5. **Rate limiting** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∑–æ–∫
6. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
npm run test:documents
```

–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ ID
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è
1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `documents-postman-collection.json`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `base_url` = `http://localhost:3001`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç "Login" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è JWT —Ç–æ–∫–µ–Ω–∞
4. –¢–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `jwt_token`
5. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
```bash
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "admin@test.com", "password": "Admin123!"}'
```

#### 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
echo "This is a test document content." > test.txt

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç
curl -X POST http://localhost:3001/api/documents/upload \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "file=@test.txt" \
  -F "title=Test Document" \
  -F "accessLevel=50"
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```bash
curl -X GET http://localhost:3001/api/documents \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Worker

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
1. –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–ø–∫—É `uploads/`
2. –ó–∞–¥–∞—á–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Redis –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. Worker (Celery) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç:
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç
   - –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏
   - –°–æ–∑–¥–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ ChromaDB
4. –°—Ç–∞—Ç—É—Å `processed` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ `true`
5. –°—á–µ—Ç—á–∏–∫ `chunkCount` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤:
- `logs/combined.log` - –≤—Å–µ –ª–æ–≥–∏
- `logs/error.log` - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –†–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## ‚ùå –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 400 | –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ |
| 401 | –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω |
| 403 | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ |
| 404 | –î–æ–∫—É–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω |
| 413 | –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π |
| 415 | –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞ |
| 429 | –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ |
| 500 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
DATABASE_URL=postgresql://user:password@localhost:5432/knowledge_base
JWT_SECRET=your-secret-key

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
MAX_FILE_SIZE=10485760  # 10MB –≤ –±–∞–π—Ç–∞—Ö
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
NODE_ENV=production
LOG_LEVEL=info
```

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (src/types/index.ts)
```typescript
export const CONSTANTS = {
  MAX_FILE_SIZE: 10 * 1024 * 1024,  // 10MB
  MAX_CHUNKS_PER_DOC: 1000,
  ACCESS_LEVEL_MIN: 1,
  ACCESS_LEVEL_MAX: 100,
  ACCESS_LEVEL_DEFAULT: 50
} as const;
```

## üö® Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. "Authentication required"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ JWT —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç: `Authorization: Bearer <token>`

#### 2. "File too large"
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10MB
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `MAX_FILE_SIZE`

#### 3. "File type not supported"
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: PDF, DOCX, DOC, TXT, CSV, JSON, MD, RTF
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏ MIME-type —Ñ–∞–π–ª–∞

#### 4. "Document not found or access denied"
- –î–æ–∫—É–º–µ–Ω—Ç –º–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
- –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `accessLevel` –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### 5. Redis connection errors
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `.env`

### –û—Ç–ª–∞–¥–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:3001/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f backend/logs/combined.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
redis-cli ping
